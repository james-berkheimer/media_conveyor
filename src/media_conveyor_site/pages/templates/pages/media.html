<!DOCTYPE html>
<html>
<head>
    <title>Media</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #313131;
            color: #e8e8e8; /* Light grey color for text */
        }
        .list-group-item, .card {
            background-color: #313131; /* Same background for list items and cards */
            border-color: #e8e8e8; /* Light grey border for list items and cards */
        }
        .card-subtitle, .card-header {
            background-color: #313131; /* Same background for card subtitle and header */
            border-color: #e8e8e8; /* Light grey border for card subtitle and header */
        }
        .card-header img {
            margin-right: 10px; /* Add some space between the image and the title */
        }
        .card-body {
            color: #e8e8e8; /* Light grey color for card text */
        }
        .card-title, .card-subtitle {
            color: #e8e8e8; /* Light grey color for card title and subtitle */
        }
        .dropdown-submenu {
        position: relative;
    }

    .dropdown-submenu .dropdown-menu {
        top: 0;
        left: 100%;
        margin-top: -1px;
    }
    </style>
    <script>
        $(document).ready(function(){
            $('.dropdown-submenu a.dropdown-toggle').on("click", function(e){
                $(this).next('div').toggle();
                e.stopPropagation();
                e.preventDefault();
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <h1 class="mt-4">Media</h1>
        <!-- <p>Found {{ items|length }} items.</p> -->
        <p>Items.1: {{ items.1 }}</p>
        <p>Items.2: {{ items.2 }}</p>
        <p>items.3: {{ items.3 }}</p>

        <!-- Create a row of horizontal cards -->
        <div class="card-deck mb-4">
            {% for media_type in media_types %}
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ media_type }}</h5>
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- Create tab content for each media type -->

        {% for media_type in media_types %}
            <div id="{{ media_type }}-content" class="tab-content" style="display: none;">
                {% for item in items %}
                    {% if item.1 == media_type %}
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">{{ item.2 }} ({{ item.3 }})</h5>
                                <!-- <p>item.1: {{ item.1 }}</p> -->
                                <!-- <p>item.2: {{ item.2 }}</p> -->
                                <!-- <p>item.3: {{ item.3 }}</p> -->
                                <!-- <p>item.4: {{ item.4 }}</p> -->
                                {% for season, episodes in item.4.items %}
                                    <p>Season: {{ season }}</p>
                                    {% for episode, details in episodes.items %}
                                        <p>{{ episode }}: {{ details.episode_name }}</p>
                                    {% endfor %}
                                {% endfor %}

                                <!-- Dropdown for seasons -->

                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}

        <!-- Add Bootstrap JS and its dependencies -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            // Handle click event on the cards
            $('.card').click(function() {
                // Hide all tab contents
                $('.tab-content').hide();

                // Show the corresponding tab content
                var mediaType = $(this).find('.card-title').text();
                $('#' + mediaType + '-content').show();
            });
        </script>
    </div>
</body>
</html>